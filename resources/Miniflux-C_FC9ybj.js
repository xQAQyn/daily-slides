import{_ as y,s as k,r as _,c as g,o as t,w as h,b as s,n as p,t as a,d as c,a as f,F as r,e as u}from"./index-BF4DSS10.js";const v={name:"Miniflux",mixins:[k],props:{item:Object},data:()=>({unreadEntries:0,unreadFeeds:0,isHealthy:!1,loading:!0,style:"status"}),computed:{status:function(){return this.isHealthy?this.unreadEntries>0?"Unread":"Online":"Error"},statusClass:function(){return this.status.toLowerCase()}},created(){const e=parseInt(this.item.checkInterval,10)||0;e>0&&setInterval(()=>this.fetchConfig(),e),this.fetchStatus()},methods:{fetchStatus:async function(){const e={"X-Auth-Token":this.item.apikey};let o;try{o=await this.fetch("/v1/feeds/counters",{headers:e}),this.isHealthy=!0}catch(i){console.log(i)}finally{this.loading=!1}if(!this.isHealthy)return;const n=Object.values(o.unreads||{});this.unreadFeeds=n.length,this.unreadEntries=n.reduce((i,d)=>i+d,0)}}},E={class:"title is-4"},C={class:"subtitle is-6"},b={key:0,class:"fa fa-circle-notch fa-spin"},F={key:2,class:"notifs"},I={key:0,class:"notif unread",title:"Unread"},H={key:1,class:"notif errors",title:"Connection error to Miniflux API, check url and apikey in config.yml"};function w(e,o,n,i,d,l){const m=_("Generic");return t(),g(m,{item:n.item},{content:h(()=>[f("p",E,a(n.item.name),1),f("p",C,[n.item.subtitle?(t(),s(r,{key:0},[u(a(n.item.subtitle),1)],64)):e.unreadEntries?(t(),s(r,{key:1},[e.unreadFeeds<2?(t(),s(r,{key:0},[u(a(e.unreadEntries)+" unread ",1)],64)):(t(),s(r,{key:1},[u(a(e.unreadEntries)+" unread in "+a(e.unreadFeeds)+" feeds ",1)],64))],64)):c("",!0)])]),indicator:h(()=>[e.loading?(t(),s("i",b)):e.style=="status"?(t(),s("div",{key:1,class:p(["status",l.statusClass])},a(l.status),3)):(t(),s("div",F,[e.unreadEntries>0?(t(),s("strong",I,a(e.unreadEntries),1)):c("",!0),e.isHealthy?c("",!0):(t(),s("strong",H," ? "))]))]),_:1},8,["item"])}const M=y(v,[["render",w],["__scopeId","data-v-ea55cf3c"]]);export{M as default};
